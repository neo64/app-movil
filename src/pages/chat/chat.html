<ion-header>
	<ion-navbar color="primary">
		<ion-title>Chat</ion-title>
	</ion-navbar>
</ion-header>

<ion-content>
	<div class="message-wrap">
		<div *ngFor="let msg of chats" class="message" [class.left]=" msg.user !== nickname " [class.right]=" msg.user === nickname ">
			<div *ngIf="msg.user === nickname">
				<img class="user-img" src="{{menuData}}" onError="this.src='assets/imgs/person.png';">
			</div>
			<div *ngIf="msg.user !== nickname">
				<img class="user-img" src="http://cfb2.ddns.net:4231/personal/{{msg.image}}.jpg" onError="this.src='assets/imgs/icon.png';" style="background: white;">
			</div>	      
			<div class="msg-detail">
				<div class="msg-info">
					<p>{{msg.sendDate | date:'dd/MM/yyyy HH:mm'}}</p>
				</div>
				<div class="msg-content">
					<span class="triangle"></span>
					<p *ngIf="msg.type !== 'image' " class="line-breaker ">{{msg.message}}</p>
					<img *ngIf="msg.type === 'image' " src="{{msg.message}}" (click)="printImage(msg.message)" />
				</div>
			</div>
		</div>
	</div>
</ion-content>
<ion-footer no-border [style.height]="showEmojiPicker ? '255px' : '55px'">
	<div class="input-wrap">
		<button ion-button #chatBA clear icon-only item-right (click)="switchEmojiPicker()">
			<ion-icon name="md-happy"></ion-icon>
		</button>
		<textarea #chat_input style="max-height: 3.5rem;" placeholder="Escribe un mensaje" [(ngModel)]="data.message" (keyup.enter)="sendMessage()"	(focusin)="onFocus()">	</textarea>
		<button ion-button #chatBD clear icon-only item-right (click)="openChooseImage()">
			<ion-icon name="ios-camera" ios="ios-camera" md="md-camera"></ion-icon>
		</button>
		<button ion-button #chatBC clear icon-only item-right (click)="sendMessage()">
			<ion-icon name="ios-send" ios="ios-send" md="md-send"></ion-icon>
		</button>	
	</div>
	<emoji-picker  ngDefaultControl [(ngModel)]="data.message"></emoji-picker>
</ion-footer>